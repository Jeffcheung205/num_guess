{% extends "num_guess_app/base.html" %}

{% block content %}
<h2>Game in Progress</h2>

<div class="game-info">
    <p><strong>Range:</strong> {{ game.min_range }} - {{ game.max_range }}</p>
    <p><strong>Attempts:</strong> {{ game.attempts }} / {{ game.max_attempts }}</p>
    <p><strong>Remaining:</strong> {{ game.max_attempts|add:"-"|add:game.attempts }}</p>
</div>

{% if feedback %}
<div class="feedback {{ feedback_type }}">
    {{ feedback }}
</div>
{% endif %}

{% if game.is_finished %}
    <a href="{% url 'end_game' %}"><button>Start New Game</button></a>
    <a href="{% url 'game_stats' %}"><button style="background: #28a745; margin-top: 10px;">View Statistics</button></a>
{% else %}
<form method="post">
    {% csrf_token %}
    
    <div class="form-group">
        <label for="guess">Enter your guess:</label>
        <input type="number" id="guess" name="guess" 
               min="{{ game.min_range }}" 
               max="{{ game.max_range }}" 
               required autofocus>
    </div>
    
    <button type="submit">Make Guess</button>
</form>

<a href="{% url 'end_game' %}" style="display: block; margin-top: 15px; text-align: center;">
    <button style="background: #6c757d;">Give Up / End Game</button>
</a>
{% endif %}

{% if guesses %}
<div class="guess-history">
    <h3 style="color: #764ba2;">Your Guesses:</h3>
    <div class="guess-list">
        {% for guess in guesses %}
        <div class="guess-item">{{ guess.guess_number }}</div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endblock %}
